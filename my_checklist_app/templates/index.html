{% extends "base.html" %}

{% block title %}Current Daily Checklist{% endblock %}

{% block content %}
    <h1>Daily Checklist</h1>

    <h2>Add New Task</h2>
    <form action="/add_task" method="post" class="task-form">
        <input type="text" name="task" placeholder="Enter a new task" required>
        <button type="submit">Add Task</button>
    </form>

    <h2>Today's Tasks</h2>
    {% if daily_tasks %}
        <ul class="task-list">
            {% for task in daily_tasks %}
                <li class="daily">
                    {{ task }}
                    <form action="/mark_task" method="post" style="display:inline;">
                        <input type="hidden" name="task" value="{{ task }}">
                        <button type="submit" name="status" value="completed" class="btn-completed">Complete</button>
                        <button type="submit" name="status" value="incomplete" class="btn-incomplete">Incomplete</button>
                    </form>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No pending tasks for today. Add some above!</p>
    {% endif %}

    <h2>Current Status</h2>
    <div class="status-sections">
        {% if completed_tasks %}
            <h3>Completed Tasks</h3>
            <ul class="task-list completed-list">
                {% for task in completed_tasks %}
                    <li>{{ task }}</li>
                {% endfor %}
            </ul>
        {% else %}
            <p>No tasks completed yet.</p>
        {% endif %}

        {% if incomplete_tasks %}
            <h3>Incomplete Tasks</h3>
            <ul class="task-list incomplete-list">
                {% for task in incomplete_tasks %}
                    <li>{{ task }}</li>
                {% endfor %}
            </ul>
        {% else %}
            <p>No tasks marked incomplete yet.</p>
        {% endif %}
    </div>

    <hr>
    <div class="navigation-links">
        <form action="/save_day" method="post" style="display:inline;">
            <button type="submit" class="btn-save">Save Day & Clear</button>
        </form>
        <a href="/history" class="btn">View Historical Checklists</a>
    </div>
{% endblock %}